{"version":3,"sources":["webpack:///./src/app/tab1/tab1.module.ts","webpack:///./src/app/tab1/tab1.page.html","webpack:///./src/app/tab1/tab1.page.scss","webpack:///./src/app/tab1/tab1.page.ts"],"names":[],"mappings":"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","file":"tab1-tab1-module.js","sourcesContent":["import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    RouterModule.forChild([{ path: '', component: Tab1Page }])\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","module.exports = \"<ion-header>\\n    <ion-toolbar>\\n        <ion-title>\\n            QR Код локации\\n        </ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content  text-center>\\n    <!--     <ion-card class=\\\"welcome-card\\\">\\n          <ion-img src=\\\"/assets/shapes.svg\\\"></ion-img>\\n          <ion-card-header>\\n            <ion-card-subtitle>Get Started</ion-card-subtitle>\\n            <ion-card-title>Welcome to Ionic</ion-card-title>\\n          </ion-card-header>\\n          <ion-card-content>\\n            <p>Now that your app has been created, you'll want to start building out features and components. Check out some of the resources below for next steps.</p>\\n          </ion-card-content>\\n        </ion-card>\\n        <ion-list lines=\\\"none\\\">\\n          <ion-list-header>\\n            <ion-label>Resources</ion-label>\\n          </ion-list-header>\\n          <ion-item href=\\\"https://ionicframework.com/docs/\\\">\\n            <ion-icon slot=\\\"start\\\" color=\\\"medium\\\" name=\\\"book\\\"></ion-icon>\\n            <ion-label>Ionic Documentation</ion-label>\\n          </ion-item>\\n          <ion-item href=\\\"https://ionicframework.com/docs/building/scaffolding\\\">\\n            <ion-icon slot=\\\"start\\\" color=\\\"medium\\\" name=\\\"build\\\"></ion-icon>\\n            <ion-label>Scaffold Out Your App</ion-label>\\n          </ion-item>\\n          <ion-item href=\\\"https://ionicframework.com/docs/layout/structure\\\">\\n            <ion-icon slot=\\\"start\\\" color=\\\"medium\\\" name=\\\"grid\\\"></ion-icon>\\n            <ion-label>Change Your App Layout</ion-label>\\n          </ion-item>\\n          <ion-item href=\\\"https://ionicframework.com/docs/theming/basics\\\">\\n            <ion-icon slot=\\\"start\\\" color=\\\"medium\\\" name=\\\"color-fill\\\"></ion-icon>\\n            <ion-label>Theme Your App</ion-label>\\n          </ion-item>\\n        </ion-list> -->\\n\\n    <ion-grid>\\n        <ion-row  justify-content-center align-items-center style='height: 100%'>\\n            <!-- <ion-col style=\\\"margin: auto;\\\"> -->\\n            <ion-button (click)='scanCode()'  class=\\\"mainbtn\\\">Сканировать</ion-button>\\n            <ion-card *ngIf = \\\"scannedCode\\\">\\n                <ion-card-content>\\n                    Считанный код : {{scannedCode}}\\n                </ion-card-content>\\n\\n            </ion-card>\\n\\n            <ion-card *ngIf = \\\"location\\\">\\n                <ion-card-content>\\n                    Текущая локация : {{location}}\\n                </ion-card-content>\\n\\n            </ion-card>\\n            <!-- </ion-col> -->\\n        </ion-row>\\n    </ion-grid>\\n</ion-content>\\n\"","module.exports = \".welcome-card ion-img {\\n  max-height: 35vh;\\n  overflow: hidden; }\\n\\n.mainbtn {\\n  height: 100px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMS9DOlxcUHJvamVjdHNcXGVNZW51TW9iaWxlL3NyY1xcYXBwXFx0YWIxXFx0YWIxLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtFQUNoQixnQkFBZ0IsRUFBQTs7QUFLbEI7RUFDRSxhQUFhLEVBQUEiLCJmaWxlIjoic3JjL2FwcC90YWIxL3RhYjEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLndlbGNvbWUtY2FyZCBpb24taW1nIHtcbiAgbWF4LWhlaWdodDogMzV2aDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuXG5cbi5tYWluYnRuIHtcbiAgaGVpZ2h0OiAxMDBweDtcbn1cbiJdfQ== */\"","import {Component} from '@angular/core';\nimport {BarcodeScanner} from '@ionic-native/barcode-scanner/ngx';\nimport {AndroidPermissions} from '@ionic-native/android-permissions/ngx';\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\nimport {AlertController} from '@ionic/angular';\nimport {Storage} from '@ionic/storage';\n\n//import { HTTP } from '@ionic-native/http/ngx';\n\n\n\nimport {globalVars} from '../global_vars';\n\n@Component({\n    selector: 'app-tab1',\n    templateUrl: 'tab1.page.html',\n    styleUrls: ['tab1.page.scss']\n})\nexport class Tab1Page {\n    scannedCode = null;\n    location = null;\n    constructor(\n        private androidPermissions: AndroidPermissions,\n        private barcodeScanner: BarcodeScanner,\n        public http: HttpClient,\n        public alertController: AlertController,\n        public storage: Storage\n\n\n    ) {\n        // this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.CAMERA        en(\n        //   result => console.log('Has permission?',result.hasPermi        n),\n        //   err => this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.        RA)\n        // );\n        storage.get('clientid').then((val) => {\n            if (val) {\n\n                storage.get('clientname').then((location) => {\n                    this.location = location;\n                })\n\n            }\n        });\n\n\n    }\n\n    async showAlert(text, id) {\n        const alertA = await this.alertController.create({\n            header: 'Подтверждение локации',\n            //            subHeader: 'Локация',\n            message: text,\n            buttons: [{\n                text: 'Все верно',\n                handler: () => {\n                    this.storage.set('clientid', id);\n                    this.storage.set('clientname', text);\n                }\n\n            }, 'Отмена']\n        });\n\n        await alertA.present();\n    }\n\n    scanCode() {\n\n\n\n\n\n\n\n        //this.androidPermissions.requestPermissions([this.androidPermissions.PERMISSION.INTERNET]);\n        //this.androidPermissions.requestPermissions([this.androidPermissions.PERMISSION.CAMERA]);\n\n        this.barcodeScanner.scan().then(barcodeData => {\n            this.scannedCode = barcodeData.text;\n\n            let pd = {\n                \"an\": 0,\n                \"condition\": [\n                    {\"field\": \"uid\", \"value\": barcodeData.text}\n                ]\n            };\n            let headers =\n            {\n                'Access-Control-Allow-Origin': '*',\n                'Access-Control-Allow-Methods': 'POST, GET, OPTIONS, PUT',\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            }\n\n            this.http.post(globalVars.apiServerIp + \":\" + globalVars.apiServerPort + \"/table/clients/action/get\", pd, {headers: headers})\n                //this.http.post(globalVars.apiServerIp + \":\" + globalVars.apiServerPort + \"/table/clients/action/get\", pd,{})\n                .subscribe(\n                    data => {\n\n\n                        if (JSON.stringify(data) !== '[]') {\n                            this.showAlert(data[0].name, data[0].id);\n                            //alert(data[0].name);\n                        } else {\n                            alert(\"Локация по QR коду не найдена!\");\n                        }\n\n\n                    },\n                    error => {\n\n                        alert(JSON.stringify(error) + \" Сервер не отвечает.Ошибка подключения!\");\n                    })\n        })\n    }\n\n}\n\n\n"],"sourceRoot":""}